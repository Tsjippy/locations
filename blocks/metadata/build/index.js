(()=>{"use strict";const e=window.wp.blocks,o=window.wp.i18n,t=window.wp.data,n=window.wp.coreData,l=window.wp.components,a=window.wp.blockEditor,i=window.ReactJSXRuntime,r=JSON.parse('{"UU":"sim/locationmeta"}');(0,e.registerBlockType)(r.UU,{icon:"calendar",edit:()=>{const e=(0,a.useBlockProps)(),r=(0,t.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[s,d]=(0,n.useEntityProp)("postType",r,"meta"),u=s.tel,c=s.url,g=null==s.location||""==s.location?{}:JSON.parse(s.location),p=(e,o)=>{let t={...s};if(o.startsWith("location")){let t=o.split("-")[1];o="location";let n={};""!=g&&(n={...g}),n[t]=e,n="latitude"==t||"longitude"==t?(e=>{if("undefined"==typeof google)return e;var o=new google.maps.Geocoder;if(null!=e.latitude&&null!=e.longitude){var t={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)};o.geocode({location:t},(function(o,t){console.log(o),"OK"===t&&o[0]&&(e.address=o[0].formatted_address)}))}return e})(n):function(e){return"undefined"==typeof google||(new google.maps.Geocoder).geocode({address:e.address},(function(o,t){"OK"===t&&(console.log(o),e.latitude=o[0].geometry.location.lat().toFixed(7),e.longitude=o[0].geometry.location.lng().toFixed(7))})),e}(n),e=JSON.stringify(n)}t[o]=e,d(t)};return(0,i.jsxs)("div",{...e,children:[(0,i.jsx)("h2",{children:(0,o.__)("Location Details")}),(0,i.jsx)(l.__experimentalInputControl,{isPressEnterToChange:!0,label:(0,o.__)("Phone number"),value:u,onChange:e=>p(e,"tel")}),(0,i.jsx)(l.__experimentalInputControl,{isPressEnterToChange:!0,label:(0,o.__)("Website url"),value:c,onChange:e=>p(e,"url")}),(0,i.jsx)(l.__experimentalInputControl,{isPressEnterToChange:!0,label:(0,o.__)("Address"),value:g.address,onChange:e=>p(e,"location-address")}),(0,i.jsx)(l.__experimentalInputControl,{isPressEnterToChange:!0,label:(0,o.__)("Latitude"),value:g.latitude,onChange:e=>p(e,"location-latitude")}),(0,i.jsx)(l.__experimentalInputControl,{isPressEnterToChange:!0,label:(0,o.__)("Longitude"),value:g.longitude,onChange:e=>p(e,"location-longitude")})]})},save:()=>null})})();