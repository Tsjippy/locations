(()=>{function e(e){var o=e.target,t=o.closest("form"),n=o.options[o.selectedIndex],l=n.value,a=n.text;"modal"==l?Main.showModal("add_location"):""!=a&&(t.querySelector("[name='location[address]']").value=a+" State",t.querySelector("[name='location[latitude]']").value=locations.locations[l].lat,t.querySelector("[name='location[longitude]']").value=locations.locations[l].lon)}console.log("Location.js loaded"),document.addEventListener("DOMContentLoaded",(function(){!function(){if(null==document.getElementById("googlemaps")&&"object"==typeof mapsApi&&"undefined"!=typeof initMap){const e=document.createElement("script");e.id="googlemaps",e.src=`//maps.googleapis.com/maps/api/js?key=${mapsApi.key}&callback=initMap`,e.async=!0,e.loading="async",document.body.append(e)}}();let o=document.querySelector('[name="location[preset]"]');void 0!==o&&null!=o&&o.addEventListener("change",e),o=document.querySelector(".latitude"),void 0!==o&&null!=o&&o.addEventListener("keydown",n),o=document.querySelector(".longitude"),void 0!==o&&null!=o&&o.addEventListener("keydown",n);var t=null;function n(){clearTimeout(t),t=setTimeout(l,1e3)}function l(){var e=document.querySelector(".latitude").value,o=document.querySelector(".longitude").value,t=new google.maps.Geocoder;if(""!=e&&""!=o){var n={lat:parseFloat(e),lng:parseFloat(o)};t.geocode({location:n},(function(e,o){"OK"===o&&e[0]&&document.querySelectorAll(".address").forEach((function(o){""==o.value&&(o.value=e[0].formatted_address)}))}))}}function a(e){var o=new google.maps.Geocoder,t=e.target.value;o.geocode({address:t},(function(e,o){"OK"===o&&(document.querySelectorAll(".latitude").forEach((function(o){o.value=e[0].geometry.location.lat().toFixed(7)})),document.querySelectorAll(".longitude").forEach((function(o){o.value=e[0].geometry.location.lng().toFixed(7)})))}))}t=null,o=document.querySelector(".address"),void 0!==o&&null!=o&&o.addEventListener("keydown",(function(e){clearTimeout(t),t=setTimeout(a,1e3,e)}));let c=document.querySelector(".current-location");function d(e){var o=e.coords.latitude.toFixed(7),t=e.coords.longitude.toFixed(7);document.querySelectorAll(".latitude").forEach((function(e){e.value=o})),document.querySelectorAll(".longitude").forEach((function(e){e.value=t})),l()}null!=c&&(Main.isMobileDevice()&&navigator.geolocation?c.addEventListener("click",(e=>navigator.geolocation.getCurrentPosition(d))):c.classList.add("hide"))}))})();